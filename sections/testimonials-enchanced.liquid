{% assign section_st = section.settings %}
<div class="sec_cov" style="--sbg:{{ section_st.bg }};--cl:{{ section_st.text_color }};--sst:{{ section_st.sst }}px;--ssb:{{ section_st.ssb }}px;--sstm:{{ section_st.sstm }}px;--ssbm:{{ section_st.ssbm }}px">  
<div class="testimonial fw-sec">
  {%- for block in section.blocks -%}
    {% capture customer_card %}
        <div class="customer-info fl f-col f-jcc pr">
          {%- if block.settings.customer_image != blank -%}
            <img src="{{ block.settings.customer_image | image_url: width: 135 }}" 
                alt="{{ block.settings.customer_name }}"
                class="customer-image"
                loading="lazy">
          {%- endif -%}

          {%- if block.settings.customer_name != blank -%}
            <h3 class="customer-name">{{ block.settings.customer_name }}</h3>
          {%- endif -%}

          {%- if block.settings.customer_location != blank -%}
            <p class="customer-location">{{ block.settings.customer_location }}</p>
          {%- endif -%}

          {%- if block.settings.testimonial_text != blank -%}
            <p class="testimonial-text">{{ block.settings.testimonial_text }}</p>
          {%- endif -%}

          <div class="time fl flex-end gap10 f-jce mt10">
            {%- if block.settings.time_text != blank -%}
              <em class="time-text">{{ block.settings.time_text }}</em>
            {%- endif -%}

            {%- if block.settings.date_text != blank -%}
              <em class="date-text">{{ block.settings.date_text }}</em>
            {%- endif -%}
          </div>
        </div>
    {% endcapture %}
    {% capture large_text %}
          {%- if block.settings.text_line_1 != blank -%}
            <h3 class="large-text blur-bg">{{ block.settings.text_line_1 }}</h3>
          {%- endif -%}
    {%endcapture %}
    {%- case block.type -%}
          {%- when 'testimonial_card' -%}
          <div class="testimonial-card hide-sm hide-md"
            style="
              grid-row: {% cycle 'row_large': '1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20' %} / span 1;
              grid-column: {% cycle 'col_lg': 2, 4 %} / span 2;
              background: {% cycle 'bg': '#fdfdfd', '#fefefe' %};
            "
            {{ block.shopify_attributes }}>
            {{ customer_card }}
          </div>
          <div class="testimonial-card hide-sm hide-lg"  
            style="
              grid-row: {{ forloop.index0 }} / span 1;
              grid-column: {% cycle 'col_md': 1, 2 %} / span 1;
              background: {% cycle 'bg': '#fdfdfd', '#fefefe' %};margin-left: {% cycle 'ml_sm': '10px', '40px' %};margin-right: {% cycle 'mr_smm': '40px', '10px' %}
            "
            {{ block.shopify_attributes }}>
            {{ customer_card }}
          </div>
          <div class="testimonial-card hide-md hide-lg"  
            style="
              grid-row: {% cycle 'row_mid':'1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20' %} / span 1;
              grid-column: 1 / span 1;
              background: {% cycle 'bg': '#fdfdfd', '#fefefe' %};
            "
            {{ block.shopify_attributes }}>
            {{ customer_card }}
          </div>
      {%- when 'large_text' -%}
        <div class="large-text-container hide-md hide-sm fl" 
            style="grid-row: {% cycle 'row_cycle_lg': '2', '5' %} / span 1; 
                    grid-column: {% cycle 'col_cycle_lg': '1', '4' %} / span 3;
                    align-items: {% cycle 'align_cycle_lg': 'flex-end', 'flex-start' %};
                    padding: 0 {% cycle 'padding_cycle_lg': '0', '20px' %};
                    top:0;"
            {{ block.shopify_attributes }}>
          {{ large_text }}
        </div>

        <div class="large-text-container hide-lg hide-sm fl fsz30" 
            style="grid-row: {% cycle 'row_cycle_md': '2', '5' %} / span 1; 
                    grid-column: {% cycle 'col_cycle_md': '1', '2' %};
                    align-items: {% cycle 'align_cycle_d': 'flex-end', 'flex-start' %};
                    padding: 0 {% cycle 'padding_cycle_md': '0', '20px' %};
                    top: {% cycle 'top30': '30px', '70px' %};"
            {{ block.shopify_attributes }}>
          {{ large_text }}
        </div>

        <div class="large-text-container hide-lg hide-md fl fsz26" 
            style="grid-row: {% cycle 'row_cycle_sm': '2', '5' %} / span 1; 
                    grid-column: 1; top: {% cycle 'top40': '20px', '60px' %};"
            {{ block.shopify_attributes }}>
          {{ large_text }}
        </div>
    {%- endcase -%}
  {%- endfor -%}
</div>
</div>
{%  style %}
.testimonial {
  display: grid;
  grid-template-rows: repeat(10, minmax(0, 1fr));
  grid-template-columns: repeat(6, minmax(0, 1fr));
  min-height: 100vh;
}

@media (max-width: 1024px) {
  .testimonial {
    grid-template-rows: repeat(12, minmax(0, 1fr));
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 576px) {
  .testimonial {
    grid-template-rows: repeat(12, minmax(0, 1fr));
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }
}


  .tablet {
    display: none;
    max-width: 400px;
  }
  @media (max-width: 576px){  .tablet {
  max-width: 100%
  }
  }

  .desktop {
    display: flex;
  }

  .testimonial-card::before {
      content: '';
      position: absolute;
      top: 0px;
      right: 20px;
      width: 60px;
      height: 60px;
      background-image: url('data:image/svg+xml;charset=utf-8,<svg id="Layer_1" data-name="Layer 1" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 336.09 263.32"><path d="M131.79,3.35c1.31,1.41,2.13,6.13,2.3,8.2-2.04,48.78,2.56,99.54,0,148.08-2.9,54.92-42.91,100.96-99.55,103.45-6.52.29-14.57,1.49-15.51-6.47-1.62-13.78.81-31.36.54-45.49,2.2-4.98,13.99-2.6,18.96-3.04,36.84-3.27,45.06-36.97,41.51-68.48-.49-4.32-1.82-7.71-6.56-8.44-20.82-2.16-46.81,2.66-66.99,0C2.27,130.59-.05,126.83,0,122.64L.5,6.04C1.87,2.68,4.88.88,8.5,1.05c37.4,2.64,79.23-3.34,116.1,0,1.97.18,5.91.93,7.19,2.31Z" fill="rgba(var(--cl), 0.1)"/><path d="M204.31,3.35c1.28-1.38,5.22-2.13,7.19-2.31,36.87-3.33,78.7,2.64,116.1,0,3.93-.18,7.16,1.98,8.24,5.76l.26,158.83c-3.24,46.35-37.04,86.2-82.84,95.16-5.72,1.12-28.01,4.96-30.71-.7l-.29-48.29c1.68-5.85,13.22-3.25,18.27-3.73,20.28-1.9,38.42-15.78,41.26-36.74.83-6.14,1.3-29.12.24-34.72-.4-2.11-3.34-5.09-5.5-5.5-21.17-1.86-46.32,2.41-67,0-6.45-.75-7.03-4.74-7.51-10.49-2.95-34.87,2.31-73.78,0-109.08.17-2.08.99-6.79,2.3-8.2Z" fill="rgba(var(--cl), 0.1)"/></svg>');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      z-index: 1;
      opacity: 0.1;
  }
  .testimonial-card {
    padding: 20px;
    align-items: flex-start;
    gap: 22px;
    justify-self: center;
    border-radius: 12px;
    box-shadow: 0px 1px 1px 0px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    margin: 10px;
    z-index: 2;
    animation: float 3s ease-in-out infinite;
    position: relative;
  }

  @keyframes float {
    0% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
    100% {
      transform: translateY(0);
    }
  }

  .testimonial-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
  }
  
  .customer-image {
    width: 67.5px;
    height: 67.5px;
    border-radius: 50px;
    object-fit: cover;
    flex-shrink: 0;
  }
  
  .customer-name {
    color: var(--cl);
    font-size: 21px;
    font-weight: 400;
    text-transform: uppercase;
    margin: 0 0 4px 0;
    font-family: {{ settings.font_face_family_sec }};
  }
  
  .customer-location {
    color: var(--cl);
    font-size: 13px;
    font-weight: 500;
    text-transform: uppercase;
    margin: 0 0 8px 0;
  }
  
  .testimonial-text {
    color: var(--cl);
    font-size: 12px;
    font-weight: 400;
    line-height: 1.4;
    margin: 0;
  }
  
  .large-text-container {
    flex-direction: column;
    justify-content: center;
    position: sticky;
    min-height: 200px;
    align-content: center;
  }
  .large-text {
    color: var(--cl);
    font-size: 42px;
    font-weight: 600;
    line-height: 0.9;
    text-transform: uppercase;
    margin: 0;
    text-align: center;
    font-family:{{settings.font_face_family_sec}};
  }
@media (max-width: 576px) {
  .large-text {
    font-size: 2rem;
  }
}
  .large-text em,
  .large-text i {
    {% if section.settings.italic_outline %}
      -webkit-text-stroke: 1px currentColor;
      -webkit-text-fill-color: transparent;
      font-style: normal;
    {% endif %}
  }

  @media (max-width: 768px) {
  @media (max-width: 1200px) {
    .testimonial {
      grid-template-columns: 50% 50%;
    }
    
    .desktop {
      display: none;
    }
    
    .tablet {
      display: flex;
    }
  }
  @media (min-width: 1400px)
  {
    .testimonial-card
    {
      max-width:400px;
    }
  }
  @media (max-width: 768px) {
    .testimonial {
      grid-template-columns: 1fr;
      grid-template-rows: auto;
      gap: 2rem;
    }

    .testimonial-card,
    .large-text-container {
      grid-column: 1 !important;
      grid-row: auto !important;
      justify-self: stretch;
    }

    .large-text-container {
      position: sticky;
      top: auto;
    }
  }
  
  @media (max-width: 480px) {
    .testimonial-card {
      flex-direction: column;
      text-align: center;
      align-items: center;
    }
    
    .customer-info {
      align-items: center;
      text-align: center;
    }
  }
{% endstyle %}

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title"
    },
    {
      "type": "checkbox",
      "id": "italic_outline",
      "label": "Enable outline for italic text"
    },
    {
      "type": "header",
      "content": "Section Settings"
    },		
    {
      "type": "range",
      "id": "sst",
      "min": 0,
      "max": 100,
      "step": 5,
      "label": "Top spacing",
      "unit": "px",
      "default": 30
    },
    {
      "type": "range",
      "id": "ssb",
      "min": 0,
      "max": 100,
      "step": 5,
      "label": "Bottom spacing",
      "unit": "px",
      "default": 80
    },		
    {
      "type": "range",
      "id": "sstm",
      "min": 0,
      "max": 100,
      "step": 5,
      "label": "Top spacing (mobile)",
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "ssbm",
      "min": 0,
      "max": 100,
      "step": 5,
      "label": "Bottom spacing (mobile)",
      "unit": "px",
      "default": 30
    },       
    {
      "type": "color",
      "id": "bg",
      "label": "Background"        
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#414042"
    }  
  ],
  "blocks": [
    {
      "type": "testimonial_card",
      "name": "Testimonial Card",
      "settings": [
        {
          "type": "image_picker",
          "id": "customer_image",
          "label": "Customer Image"
        },
        {
          "type": "text",
          "id": "customer_name",
          "label": "Customer Name"
        },
        {
          "type": "text",
          "id": "customer_location",
          "label": "Customer Location"
        },
        {
          "type": "textarea",
          "id": "testimonial_text",
          "label": "Testimonial Text"
        },
        {
          "type": "range",
          "id": "grid_row",
          "min": 1,
          "max": 10,
          "step": 1,
          "default": 1,
          "label": "Grid Row Position"
        },
        {
          "type": "range",
          "id": "grid_column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1,
          "label": "Grid Column Position"
        },
            {
      "type": "text",
      "id": "time_text",
      "label": "Time"
    },
    {
      "type": "text",
      "id": "date_text",
      "label": "Date"
    }
      ]
    },
    {
      "type": "large_text",
      "name": "Large Text",
      "settings": [
        {
          "type": "text",
          "id": "text_line_1",
          "label": "Text Line"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "testimonial_card"
        },
        {
          "type": "large_text"
        }
      ]
    }
  ]
}
{% endschema %}